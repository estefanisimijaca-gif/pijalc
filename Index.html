<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Ruleta de Pijamadas</title>
  <style>
    :root{
      --bg1:#0b0020;
      --bg2:#1a0030;
      --accent1:#ff77d0;
      --accent2:#7c4dff;
      --accent3:#4dd9ff;
      font-family: 'Poppins', sans-serif;
    }
    body{margin:0;background:radial-gradient(circle at top,var(--bg1),var(--bg2));color:white;min-height:100vh;display:flex;flex-direction:column;align-items:center;justify-content:flex-start;}
    header{text-align:center;padding:24px;}
    header h1{font-size:2.2rem;margin:0;background:linear-gradient(90deg,var(--accent1),var(--accent2),var(--accent3));-webkit-background-clip:text;-webkit-text-fill-color:transparent;}
    header p{margin-top:8px;color:rgba(255,255,255,0.8)}
    .main{display:grid;grid-template-columns:1fr auto 1fr;gap:24px;width:100%;max-width:1100px;padding:16px;}
    .card{background:rgba(255,255,255,0.05);border-radius:12px;padding:16px;backdrop-filter:blur(6px);}
    .participants input{width:100%;padding:10px;border-radius:8px;border:none;margin-bottom:10px;}
    .participants button{width:100%;padding:10px;border-radius:8px;background:black;color:white;font-weight:600;cursor:pointer;}
    .participants-list{margin-top:10px;}
    .participants-list div{background:rgba(255,255,255,0.1);padding:6px 10px;border-radius:6px;margin-bottom:6px;}
    .wheel-area{text-align:center;position:relative;}
    .turn{margin-bottom:12px;padding:8px 16px;border-radius:10px;background:linear-gradient(90deg,var(--accent3),var(--accent2));font-weight:600;}
    canvas{border-radius:50%;border:6px solid white;}
    .pointer{
      position:absolute;
      top:30px;
      left:50%;
      transform:translateX(-50%);
      width:0;
      height:0;
      border-left:20px solid transparent;
      border-right:20px solid transparent;
      border-bottom:30px solid #ffeb3b;
      z-index:10;
    }
    .spin-btn{margin-top:16px;padding:12px 24px;border:none;border-radius:24px;background:linear-gradient(90deg,var(--accent1),var(--accent3));font-weight:600;font-size:1.1rem;color:white;cursor:pointer;}
    .results{min-height:150px;overflow-y:auto;color:white;font-size:0.9rem;}
    footer{margin-top:24px;padding:16px;text-align:center;color:rgba(255,255,255,0.85);font-size:0.9rem;}
    footer strong{color:#ffd34d;}
    .color-bullet{width:20px;height:20px;border-radius:50%;display:inline-block;margin-right:8px;}
    .result-entry{margin-bottom:6px;display:flex;align-items:center;gap:6px;}
  </style>
</head>
<body>
  <header>
    <h1>âœ¨ Ruleta de Pijamadas âœ¨</h1>
    <p>Â¡Descubre tu color de pijama! Cada giro es una sorpresa mÃ¡gica para tu noche de diversiÃ³n con amigos ðŸŒ™</p>
  </header>

  <div class="main">
    <div class="card participants">
      <h3>Participantes de la Pijamada</h3>
      <input type="text" id="nameInput" placeholder="Nombre del participante" />
      <button id="addBtn">Agregar</button>
      <div class="participants-list" id="participantsList"></div>
      <button id="nextBtn">Siguiente Turno</button>
    </div>

    <div class="wheel-area">
      <div class="pointer"></div>
      <div class="turn">Turno de: <span id="currentTurn">â€”</span></div>
      <canvas id="wheel" width="400" height="400"></canvas>
      <button class="spin-btn" id="spinBtn">Â¡Girar la Ruleta! ðŸŽ²</button>
      <div id="winner" style="margin-top:12px;font-weight:600;"></div>
    </div>

    <div class="card results">
      <div id="resultsList">Los resultados de la ruleta aparecerÃ¡n aquÃ­ despuÃ©s de cada giro âœ¨</div>
    </div>
  </div>

  <footer>
    ðŸŽ­ <strong>Concepto Doble:</strong> Cada color no solo define tu pijama, tambiÃ©n puede inspirar tu comida temÃ¡tica. Â¡Comparte el link con tus amigos para unirse automÃ¡ticamente a la diversiÃ³n!
  </footer>

  <script>
    const COLORS = [
      {name:'Amarillo', color:'#FFD700'},
      {name:'Azul', color:'#1E90FF'},
      {name:'Rojo', color:'#FF4500'},
      {name:'Morado', color:'#8A2BE2'},
      {name:'Verde', color:'#32CD32'},
      {name:'CafÃ©', color:'#8B4513'},
      {name:'Rosado', color:'#FF69B4'},
      {name:'Blanco', color:'#FFFFFF'}
    ];

    const canvas=document.getElementById('wheel');
    const ctx=canvas.getContext('2d');
    const center={x:canvas.width/2,y:canvas.height/2};
    const radius=canvas.width/2-10;
    let rotation=0;
    let isSpinning=false;
    const segment=2*Math.PI/COLORS.length;

    function getContrastColor(hex){
      const c=parseInt(hex.substring(1),16);
      const r=(c>>16)&255,g=(c>>8)&255,b=c&255;
      const l=(0.299*r+0.587*g+0.114*b)/255;
      return l>0.6?'#000':'#fff';
    }

    function drawWheel(){
      ctx.clearRect(0,0,canvas.width,canvas.height);
      ctx.save();
      ctx.translate(center.x,center.y);
      ctx.rotate(rotation);
      for(let i=0;i<COLORS.length;i++){
        const start=i*segment;
        ctx.beginPath();ctx.moveTo(0,0);ctx.arc(0,0,radius,start,start+segment);ctx.closePath();
        ctx.fillStyle=COLORS[i].color;ctx.fill();ctx.stroke();
        const mid=start+segment/2;
        ctx.save();
        ctx.rotate(mid);
        ctx.translate(radius*0.65,0);
        ctx.rotate(Math.PI/2);
        ctx.fillStyle=getContrastColor(COLORS[i].color);
        ctx.font="14px Poppins";
        ctx.textAlign="center";
        ctx.fillText(COLORS[i].name,0,0);
        ctx.restore();
      }
      ctx.restore();
    }
    drawWheel();

    function easeOut(t){return 1-Math.pow(1-t,3)}

    function spin(){
      if(isSpinning) return;
      isSpinning=true;
      const target=Math.floor(Math.random()*COLORS.length);
      const targetAngle=-(target*segment+segment/2)+Math.PI/2;
      const total=6*Math.PI+targetAngle-rotation;
      const duration=4000;
      const start=performance.now();
      requestAnimationFrame(function anim(now){
        const t=Math.min(1,(now-start)/duration);
        rotation+=total*easeOut(t)-(rotation% (2*Math.PI));
        drawWheel();
        if(t<1){requestAnimationFrame(anim);}else{
          isSpinning=false;
          const winner=COLORS[target];
          const participant=document.getElementById('currentTurn').textContent;
          document.getElementById('winner').textContent=`${participant} obtuvo: ${winner.name}`;
          const results=document.getElementById('resultsList');
          if(results.textContent.includes('Los resultados')) results.innerHTML='';
          const div=document.createElement('div');
          div.className='result-entry';
          div.innerHTML=`<span class='color-bullet' style='background:${winner.color}'></span><strong>${participant}</strong> â†’ ${winner.name}`;
          results.prepend(div);
        }
      });
    }

    document.getElementById('spinBtn').addEventListener('click',spin);
    document.getElementById('addBtn').addEventListener('click',()=>{
      const name=document.getElementById('nameInput').value.trim();
      if(!name) return;
      const list=document.getElementById('participantsList');
      const div=document.createElement('div');div.textContent=name;list.appendChild(div);
      document.getElementById('nameInput').value='';
      if(document.getElementById('currentTurn').textContent==='â€”'){
        document.getElementById('currentTurn').textContent=name;
      }
    });
    document.getElementById('nextBtn').addEventListener('click',()=>{
      const list=document.getElementById('participantsList').children;
      if(list.length===0) return;
      const current=document.getElementById('currentTurn').textContent;
      let idx=[...list].findIndex(x=>x.textContent===current);
      idx=(idx+1)%list.length;
      document.getElementById('currentTurn').textContent=list[idx].textContent;
    });
  </script>
</body>
</html>

